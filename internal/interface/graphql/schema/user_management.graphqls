# internal/interface/graphql/schema/user_management.graphqls

# ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†é–¢é€£ã®ãƒŸãƒ¥ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
extend type Mutation {
  # æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆï¼ˆç®¡ç†è€…æ¨©é™ãŒå¿…è¦ï¼‰
  createUser(input: CreateUserInput!): User! @hasRole(role: "Admin")
  
  # ãƒ¦ãƒ¼ã‚¶ãƒ¼è‡ªèº«ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´ï¼ˆèªè¨¼ãŒå¿…è¦ï¼‰
  changePassword(oldPassword: String!, newPassword: String!): Boolean! @auth
  
  # ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆï¼ˆç®¡ç†è€…æ¨©é™ãŒå¿…è¦ï¼‰
  resetPassword(userId: ID!, newPassword: String!): Boolean! @hasRole(role: "Admin")

    # ğŸ†• ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å‰Šé™¤ï¼ˆç®¡ç†è€…æ¨©é™ãŒå¿…è¦ï¼‰
  deleteUser(userId: ID!): Boolean! @hasRole(role: "Admin")
}

# ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆå…¥åŠ›
input CreateUserInput {
  username: String!
  password: String!
  role: String!
}

input UpdateUserInput {
  username: String!
  role: String!
}

extend type Mutation {
  updateUser(userId: ID!, input: UpdateUserInput!): User! @hasRole(role: "Admin")
}

# ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†é–¢é€£ã®ã‚¯ã‚¨ãƒª
extend type Query {
  # ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§å–å¾—ï¼ˆç®¡ç†è€…æ¨©é™ãŒå¿…è¦ï¼‰
  users: [User!]! @hasRole(role: "Admin")
  
  # ç‰¹å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å–å¾—ï¼ˆç®¡ç†è€…æ¨©é™ãŒå¿…è¦ï¼‰
  user(id: ID!): User @hasRole(role: "Admin")
}


